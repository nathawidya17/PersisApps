generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "mysql"
}

model tb_dokumen {
  id_dokumen    Int                       @id @default(autoincrement())
  id_siswa      Int?
  jenis_dokumen tb_dokumen_jenis_dokumen?
  file_path     String?                   @db.VarChar(255)
  uploaded_at   DateTime                  @default(now()) @db.Timestamp(0)
  tb_siswa      tb_siswa?                 @relation(fields: [id_siswa], references: [id_siswa], onDelete: Restrict, onUpdate: Restrict, map: "tb_dokumen_ibfk_1")

  @@index([id_siswa], map: "id_siswa")
}

model tb_orang_tua {
  id_ortu            Int      @id @default(autoincrement())
  id_siswa           Int
  nama_ayah          String   @db.VarChar(50)
  tempat_lahir_ayah  String   @db.VarChar(20)
  tanggal_lahir_ayah DateTime @db.Date
  pendidikan_ayah    String   @db.VarChar(50)
  pekerjaan_ayah     String   @db.VarChar(50)
  penghasilan_ayah   String   @db.VarChar(50)
  nama_ibu           String   @db.VarChar(50)
  tempat_lahir_ibu   String   @db.VarChar(20)
  tanggal_lahir_ibu  DateTime @db.Date
  pendidikan_ibu     String   @db.VarChar(50)
  pekerjaan_ibu      String   @db.VarChar(50)
  penghasilan_ibu    String   @db.VarChar(50)
  tb_siswa           tb_siswa @relation(fields: [id_siswa], references: [id_siswa], onUpdate: Restrict, map: "tb_orang_tua_ibfk_1")

  @@index([id_siswa], map: "id_siswa")
}

model tb_pembayaran {
  id_pembayaran     Int                              @id @default(autoincrement())
  id_tagihan        Int?
  metode            tb_pembayaran_metode?
  jumlah_bayar      Int?
  bukti_pembayaran  String?                          @db.VarChar(255)
  status_verifikasi tb_pembayaran_status_verifikasi? @default(pending)
  tanggal_bayar     DateTime?                        @db.Date
  tb_tagihan        tb_tagihan?                      @relation(fields: [id_tagihan], references: [id_tagihan], onDelete: Restrict, onUpdate: Restrict, map: "tb_pembayaran_ibfk_1")

  @@index([id_tagihan], map: "id_tagihan")
}

model tb_pendaftaran {
  id_pendaftar       Int                               @id @default(autoincrement())
  nisn               String                            @db.VarChar(15)
  jalur_pendaftaran  tb_pendaftaran_jalur_pendaftaran
  status_pembayaran  tb_pendaftaran_status_pembayaran? @default(belum_bayar)
  nama_lengkap       String                            @db.VarChar(100)
  tempat_lahir       String                            @db.VarChar(50)
  tanggal_lahir      DateTime                          @db.Date
  jenis_kelamin      tb_pendaftaran_jenis_kelamin
  ukuran_baju        tb_pendaftaran_ukuran_baju
  no_hp              String                            @db.VarChar(15)
  alamat_rumah       String                            @db.Text
  rt                 String                            @db.VarChar(3)
  rw                 String                            @db.VarChar(3)
  anak_ke            Int
  jumlah_saudara     Int
  asal_sekolah       String                            @db.VarChar(100)
  kode_pos_sekolah   String                            @db.VarChar(10)
  nama_ayah          String                            @db.VarChar(100)
  tempat_lahir_ayah  String                            @db.VarChar(50)
  tanggal_lahir_ayah DateTime                          @db.Date
  pendidikan_ayah    String                            @db.VarChar(50)
  pekerjaan_ayah     String                            @db.VarChar(50)
  penghasilan_ayah   tb_pendaftaran_penghasilan_ayah
  nama_ibu           String                            @db.VarChar(100)
  tempat_lahir_ibu   String                            @db.VarChar(50)
  tanggal_lahir_ibu  DateTime                          @db.Date
  pendidikan_ibu     String                            @db.VarChar(50)
  pekerjaan_ibu      String                            @db.VarChar(50)
  penghasilan_ibu    tb_pendaftaran_penghasilan_ibu
  created_at         DateTime                          @default(now()) @db.Timestamp(0)
  updated_at         DateTime                          @default(now()) @db.Timestamp(0)
  tb_daftar_ulang    tb_daftar_ulang[]
}

model tb_prestasi {
  id_prestasi    Int                        @id @default(autoincrement())
  id_siswa       Int
  nama_prestasi  String                     @db.VarChar(150)
  jenis_prestasi tb_prestasi_jenis_prestasi
  tingkat        tb_prestasi_tingkat
  peringkat      String?                    @db.VarChar(20)
  tahun          Int                        @db.Year
  penyelenggara  String?                    @db.VarChar(100)
  tb_siswa       tb_siswa                   @relation(fields: [id_siswa], references: [id_siswa], onUpdate: Restrict, map: "tb_prestasi_ibfk_1")

  @@index([id_siswa], map: "id_siswa")
}

model tb_siswa {
  id_siswa         Int                    @id @default(autoincrement())
  NISN             String                 @unique(map: "nisn") @db.VarChar(10)
  nama_lengkap     String                 @db.VarChar(50)
  tipe_siswa       tb_siswa_tipe_siswa    @default(reguler)
  tempat_lahir     String                 @db.VarChar(50)
  tanggal_lahir    DateTime               @db.Date
  jenis_kelamin    tb_siswa_jenis_kelamin
  ukuran_baju      tb_siswa_ukuran_baju?
  no_hp            String                 @db.VarChar(15)
  alamat           String                 @db.Text
  rt               String?                @db.VarChar(3)
  rw               String?                @db.VarChar(3)
  anak_ke          Int
  jumlah_saudara   Int
  asal_sekolah     String                 @db.VarChar(50)
  tahun_lulus      Int                    @db.Year
  alamat_sekolah   String                 @db.VarChar(50)
  kode_pos_sekolah Int?
  created_at       DateTime               @default(now()) @db.Timestamp(0)
  updated_at       DateTime               @default(dbgenerated("('0000-00-00 00:00:00')")) @db.Timestamp(0)
  tb_dokumen       tb_dokumen[]
  tb_orang_tua     tb_orang_tua[]
  tb_prestasi      tb_prestasi[]
  tb_tagihan       tb_tagihan[]
}

model tb_tagihan {
  id_tagihan       Int                          @id @default(autoincrement())
  id_siswa         Int?
  nama_tagihan     String?                      @db.VarChar(100)
  total_tagihan    Int?
  total_terbayar   Int?                         @default(0)
  status           tb_tagihan_status?           @default(belum_lunas)
  updated_at       DateTime                     @default(now()) @db.Timestamp(0)
  jenis_pembayaran tb_tagihan_jenis_pembayaran? @default(bayar_sekarang)
  tb_pembayaran    tb_pembayaran[]
  tb_siswa         tb_siswa?                    @relation(fields: [id_siswa], references: [id_siswa], onDelete: Restrict, onUpdate: Restrict, map: "tb_tagihan_ibfk_1")

  @@index([id_siswa], map: "id_siswa")
}

model tb_users {
  id_user    Int           @id @default(autoincrement())
  nama       String        @db.VarChar(250)
  email      String        @unique(map: "unique_email") @db.VarChar(250)
  no_telp    String        @db.VarChar(15)
  role       tb_users_role
  created_at DateTime      @default(now()) @db.Timestamp(0)
  update_at  DateTime      @default(dbgenerated("('0000-00-00 00:00:00')")) @db.Timestamp(0)
}

model tb_daftar_ulang {
  id_daftar_ulang   Int                                @id @default(autoincrement())
  id_pendaftar      Int
  tanggal_bayar     DateTime?                          @db.Date
  jumlah_bayar      Int?
  metode_pembayaran tb_daftar_ulang_metode_pembayaran?
  bukti_pembayaran  String?                            @db.VarChar(255)
  status_validasi   tb_daftar_ulang_status_validasi?   @default(menunggu)
  created_at        DateTime                           @default(now()) @db.Timestamp(0)
  tb_pendaftaran    tb_pendaftaran                     @relation(fields: [id_pendaftar], references: [id_pendaftar], onUpdate: Restrict, map: "tb_daftar_ulang_ibfk_1")

  @@index([id_pendaftar], map: "id_pendaftar")
}

enum tb_dokumen_jenis_dokumen {
  kk
  akta
  ijazah
  pas_foto
  kio___kks___pip___pkh @map("kio / kks / pip / pkh")
}

enum tb_pembayaran_metode {
  cash
  transfer
}

enum tb_prestasi_jenis_prestasi {
  Akademik
  Non_Akademik @map("Non Akademik")
}

enum tb_prestasi_tingkat {
  Sekolah
  Kecamatan
  Kabupaten
  Provinsi
  Nasional
  Internasional
}

enum tb_pembayaran_status_verifikasi {
  pending
  verified
}

enum tb_tagihan_status {
  lunas
  belum_lunas
}

enum tb_siswa_jenis_kelamin {
  Putra
  Putri
}

enum tb_siswa_ukuran_baju {
  S
  M
  L
  XL
  XXL
}

enum tb_tagihan_jenis_pembayaran {
  bayar_sekarang
  bayar_nanti
}

enum tb_pendaftaran_jalur_pendaftaran {
  umum
  tahfidz
  prestasi
}

enum tb_pendaftaran_status_pembayaran {
  belum_bayar
  sudah_bayar
}

enum tb_siswa_tipe_siswa {
  reguler
  bantuan
}

enum tb_daftar_ulang_metode_pembayaran {
  cash
  transfer
}

enum tb_users_role {
  admin
}

enum tb_daftar_ulang_status_validasi {
  menunggu
  diterima
  ditolak
}

enum tb_pendaftaran_jenis_kelamin {
  Putra
  Putri
}

enum tb_pendaftaran_ukuran_baju {
  S
  M
  L
  XL
  XXL
}

enum tb_pendaftaran_penghasilan_ayah {
  kurang_dari_1_000_000 @map("kurang dari 1.000.000")
  // 1.000.001 - 3.000.000 @map("1.000.001 - 3.000.000")
  // 3.000.001 - 5.000.000 @map("3.000.001 - 5.000.000")
  lebih_dari_5_000_000  @map("lebih dari 5.000.000")
}

enum tb_pendaftaran_penghasilan_ibu {
  kurang_dari_1_000_000 @map("kurang dari 1.000.000")
  // 1.000.001 - 3.000.000 @map("1.000.001 - 3.000.000")
  // 3.000.001 - 5.000.000 @map("3.000.001 - 5.000.000")
  lebih_dari_5_000_000  @map("lebih dari 5.000.000")
}
